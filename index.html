<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Constitute</title>
  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="app.css" />
</head>
<body>
<header class="topbar">
  <div class="left">
    <div class="title">
      <div class="appname">
        Constitute

        <span id="connWrap" class="connWrap">
          <span id="connDot" class="connDot conn-off" aria-label="Connection status"></span>
          <span id="connStateText" class="connStateText">offline</span>

          <div id="connPopover" class="popover hidden" role="status" aria-live="polite">
            <div class="popoverTitle">Status</div>
            <div class="popoverRow"><span class="muted">Relay</span><span id="popRelay">offline</span></div>
            <div class="popoverRow"><span class="muted">Identity</span><span id="popDaemon">unknown</span></div>
            <div class="popoverRow"><span class="muted">Swarm</span><span id="popSwarm">offline</span></div>
            <div class="popoverRow"><span class="muted">Swarm cache</span><span id="popSwarmCache">n/a</span></div>
            <div class="popoverDivider"></div>
            <div class="popoverTitle small">Recent</div>
            <div id="connLog" class="connLog" aria-label="Connection state log"></div>
          </div>
        </span>

      </div>
      <div id="panePath" class="small muted"></div>
    </div>
  </div>

  <div class="right">
    <button id="btnBell" class="iconbtn" type="button" aria-label="Notifications">
      <svg class="bellIcon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 21a2.5 2.5 0 0 0 2.4-1.8h-4.8A2.5 2.5 0 0 0 12 21Zm7-5.2H5c1.4-1.3 2.2-3.2 2.2-5.2V9.3c0-2.7 1.7-5 4.2-5.8V3a.6.6 0 1 1 1.2 0v.5c2.5.8 4.2 3.1 4.2 5.8v1.3c0 2 .8 3.9 2.2 5.2Z"/>
      </svg>
    </button>

    <button id="btnMenu" class="iconbtn" type="button" aria-label="Menu">☰</button>
  </div>
</header>

<div id="notifMenu" class="menu hidden" aria-label="Notifications menu">
  <div class="menuHeader">
    <div class="menuTitle">Notifications</div>
    <button id="btnNotifClear" class="smallbtn" type="button">Clear</button>
  </div>
  <div id="notifList" class="menuList"></div>
</div>

<div id="drawerBackdrop" class="backdrop hidden"></div>
<aside id="drawer" class="drawer hidden" aria-label="Navigation drawer">
  <div class="drawerHeader">
    <div class="drawerTitle">Menu</div>
    <button id="btnDrawerClose" class="iconbtn" type="button">×</button>
  </div>

  <nav class="drawerNav">
    <button class="navbtn" data-activity="home">Home</button>
    <button class="navbtn" data-activity="settings">Settings</button>
    <button class="navbtn" data-activity="onboarding">Onboarding</button>
  </nav>

  <div class="drawerFooter small muted">
    Minimal browser-native identity prototype.
  </div>
</aside>

<main class="main">
  <section id="viewHome" class="activity hidden">
    <h1>Home</h1>
    <div class="card">
      <div class="cardTitle">Identity summary</div>
      <div class="kv">
        <div class="k">This device</div>
        <div class="v" id="deviceDidSummary"></div>
      </div>
      <div class="kv">
        <div class="k">Security</div>
        <div class="v" id="deviceSecuritySummary"></div>
      </div>
      <div class="kv">
        <div class="k">Linked</div>
        <div class="v" id="identityLinkedSummary"></div>
      </div>
    </div>
  </section>

  <section id="viewSettings" class="activity hidden">
    <div class="tabs">
      <button class="tab" data-tab="profile">Profile</button>
      <button class="tab" data-tab="devices">Devices</button>
      <button class="tab" data-tab="peers">Peers</button>
      <button class="tab" data-tab="pairing">Pairing</button>
      <button class="tab" data-tab="identity">Identity</button>
    </div>

    <div id="tab_profile" class="tabpane hidden">
      <h2>Profile</h2>

      <label for="profileName">Name</label>
      <input id="profileName" type="text" placeholder="display name" />

      <label for="profileAbout">About</label>
      <textarea id="profileAbout" placeholder="short bio"></textarea>

      <div class="row">
        <button id="btnSaveProfile" type="button">Save Profile</button>
      </div>
    </div>

    <div id="tab_devices" class="tabpane hidden">
      <h2>Devices</h2>

      <div class="kv">
        <div class="k">This device DID</div>
        <div class="v" id="deviceDid"></div>
      </div>

      <label for="deviceLabel">This device label</label>
      <input id="deviceLabel" type="text" placeholder="device label" />

      <div class="row">
        <button id="btnSaveDeviceLabel" type="button">Save Device Label</button>
      </div>

      <h3>Known devices</h3>
      <div id="deviceList" class="list"></div>

      <h3>Blocked devices</h3>
      <div id="blockedList" class="list"></div>
    </div>

    <div id="tab_peers" class="tabpane hidden">
      <h2>Peers</h2>
      <div class="card">
        <div class="cardTitle">Create Zone</div>
        <div class="row">
          <input id="zoneName" type="text" placeholder="Zone name (required)" />
          <button id="btnCreateZone" type="button">Create</button>
        </div>
        <div class="small muted">Share the link below to invite others.</div>
        <div class="row">
          <div id="zoneLink" class="mono"></div>
          <button id="btnCopyZoneLink" type="button">Copy link</button>
        </div>
      </div>

      <div class="card">
        <div class="cardTitle">Join Zone</div>
        <div class="row">
          <input id="zoneJoinKey" type="text" placeholder="Paste zone key" />
          <button id="btnJoinZone" type="button">Join</button>
        </div>
      </div>

      <div id="zonesList" class="list"></div>
    </div>


    <div id="tab_pairing" class="tabpane hidden">
      <h2>Pairing</h2>

      <h3>Pending requests</h3>
      <div id="pairingList" class="list"></div>
      <div id="pairingEmpty" class="small muted">No pending pairing requests.</div>
    </div>

    <div id="tab_identity" class="tabpane hidden">
      <h2>Identity</h2>

      <div class="kv">
        <div class="k">Identity label</div>
        <div class="v" id="identityLabel"></div>
      </div>

      <div class="kv">
        <div class="k">Identity ID</div>
        <div class="v" id="identityId"></div>
      </div>

      <div class="kv">
        <div class="k">Linked</div>
        <div class="v" id="identityLinked"></div>
      </div>
    </div>
  </section>

  <section id="viewOnboard" class="activity hidden">
    <h1>Onboarding</h1>

    <div id="obStepDevice" class="card hidden">
      <div class="cardTitle">Step 1 — Device security</div>
      <div class="small muted">Pick one. WebAuthn is recommended.</div>

      <div class="choiceRow" role="radiogroup" aria-label="Device security method">
        <button id="btnSecWebAuthn" type="button" class="choiceBtn" role="radio" aria-checked="false">
          <div class="choiceTitle">WebAuthn</div>
          <div class="choiceSub">Platform-backed key (preferred)</div>
        </button>

        <button id="btnSecSkip" type="button" class="choiceBtn" role="radio" aria-checked="false">
          <div class="choiceTitle">Skip</div>
          <div class="choiceSub">Software-only (fallback)</div>
        </button>
      </div>

      <div id="obDeviceStatus" class="small muted" style="margin-top:.5rem;"></div>

      <div class="row" style="margin-top:.75rem;">
        <button id="btnObDeviceContinue" type="button">Continue</button>
      </div>
    </div>

    <div id="obStepIdentity" class="card hidden">
      <div class="cardTitle">Step 2 — Labels</div>
      <div class="small muted">Both are required.</div>

      <label for="obDeviceLabel">Device label</label>
      <input id="obDeviceLabel" type="text" placeholder="e.g. users-laptop" />

      <label for="obIdentityLabel">Identity label</label>
      <input id="obIdentityLabel" type="text" placeholder="e.g. some-unique-username" />

      <div class="tabs" style="margin-top:.5rem;">
        <button type="button" class="tab tab-active" data-mode="new">Create</button>
        <button type="button" class="tab" data-mode="existing">Join existing</button>
      </div>

      <div class="row" style="margin-top:.75rem;">
        <button id="btnObIdentityContinue" type="button">Continue</button>
      </div>

      <div id="existingInfo" class="small muted hidden" style="margin-top:.75rem;"></div>
    </div>
  </section>
</main>

<script type="module" src="./app.js"></script>
</body>
</html>
