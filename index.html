<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Constitute</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="app.css" />
</head>
<body>
<header class="topbar">
  <div class="left">
    <div class="title">
      <div class="appname">
        Constitute

        <span id="connWrap" class="connWrap">
          <span id="connDot" class="connDot conn-off" aria-label="Connection status"></span>

          <!-- immediate hover popover -->
          <div id="connPopover" class="popover hidden" role="status" aria-live="polite">
            <div class="popoverTitle">Status</div>
            <div class="popoverRow"><span class="muted">Relay</span><span id="popRelay">offline</span></div>
            <div class="popoverRow"><span class="muted">Identity</span><span id="popDaemon">unknown</span></div>
          </div>
        </span>

      </div>
      <div id="panePath" class="panePath">Home</div>
    </div>
  </div>

  <div class="right">
    <button id="btnBell" class="iconbtn" title="Notifications" aria-label="Notifications">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2Zm6-6V11a6 6 0 1 0-12 0v5L4 18v1h16v-1l-2-2Z"/>
      </svg>
      <span id="notifDot" class="dot hidden"></span>
    </button>

    <button id="btnMenu" class="iconbtn" title="Menu" aria-label="Menu">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
    </button>

    <div id="notifMenu" class="dropdown hidden" role="menu" aria-label="Notifications">
      <div class="dropdownHeader">Notifications</div>
      <div id="notifList" class="dropdownList"></div>
      <div class="dropdownFooter">
        <button id="btnNotifClear" class="linkbtn" type="button">Clear notifications</button>
      </div>
    </div>
  </div>
</header>

<div id="drawerBackdrop" class="backdrop hidden"></div>

<aside id="drawer" class="drawer hidden" aria-label="Navigation drawer">
  <div class="drawerHeader">
    <div class="drawerTitle">Activities</div>
    <button id="btnDrawerClose" class="iconbtn" aria-label="Close">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 6l12 12M18 6L6 18"/></svg>
    </button>
  </div>

  <nav class="drawerNav">
    <button class="navitem" data-activity="home">Home</button>
    <button class="navitem" data-activity="settings">Settings</button>
  </nav>
</aside>

<main class="app">
  <section id="viewHome" class="view">
    <div class="placeholder">Home</div>
  </section>

  <section id="viewSettings" class="view hidden">
    <div class="tabs">
      <button type="button" class="tab tab-active" data-tab="profile">Profile</button>
      <button type="button" class="tab" data-tab="devices">Devices</button>
      <button type="button" class="tab" data-tab="pairing">Pairing</button>
      <button type="button" class="tab" data-tab="identity">Identity</button>
    </div>

    <div id="tab_profile" class="tabpane">
      <h2>Profile</h2>

      <label for="profileName">Display name</label>
      <input id="profileName" type="text" placeholder="name" />

      <label for="profileAbout">About</label>
      <textarea id="profileAbout" rows="4" placeholder="about…"></textarea>

      <div class="row">
        <button id="btnSaveProfile" type="button">Save Profile</button>
      </div>
    </div>

    <div id="tab_devices" class="tabpane hidden">
      <h2>Devices</h2>

      <div class="kv">
        <div class="k">This device DID</div>
        <div class="v" id="deviceDid"></div>
      </div>

      <label for="deviceLabel">This device label</label>
      <input id="deviceLabel" type="text" placeholder="device label" />

      <div class="row">
        <button id="btnSaveDeviceLabel" type="button">Save Device Label</button>
      </div>

      <h3>Known devices</h3>
      <div id="deviceList" class="list"></div>
    </div>

    <div id="tab_pairing" class="tabpane hidden">
      <h2>Pairing</h2>

      <h3>Pending requests</h3>
      <div id="pairingList" class="list"></div>
      <div id="pairingEmpty" class="small muted">No pending pairing requests.</div>
    </div>

    <div id="tab_identity" class="tabpane hidden">
      <h2>Identity</h2>

      <div class="kv">
        <div class="k">Identity label</div>
        <div class="v" id="identityLabel"></div>
      </div>

      <div class="kv">
        <div class="k">Identity ID</div>
        <div class="v" id="identityId"></div>
      </div>

      <div class="kv">
        <div class="k">Linked</div>
        <div class="v" id="identityLinked"></div>
      </div>
    </div>
  </section>

  <section id="viewOnboard" class="view hidden">
    <div class="card">
      <div class="small"><strong>Step 1/2:</strong> device • Step 2/2: identity</div>

      <div id="obStepDevice" class="wizard-step">
        <h2>Set up this device</h2>
        <div class="small">Device DID: <span id="deviceDidSummary">(initializing…)</span></div>
        <div class="small">Security: <span id="deviceSecuritySummary">checking…</span></div>
        <div class="row" style="margin-top: 0.75rem;">
          <button id="btnObDeviceContinue" type="button">Continue</button>
        </div>
      </div>

      <div id="obStepIdentity" class="wizard-step hidden">
        <div class="small">Step 1/2: device • <strong>Step 2/2:</strong> identity</div>

        <div class="tabs">
          <button type="button" class="tab tab-active" data-mode="new">New identity</button>
          <button type="button" class="tab" data-mode="existing">Existing identity</button>
        </div>

        <label for="obDeviceLabel">Device label (required)</label>
        <input id="obDeviceLabel" type="text" placeholder="device label" />

        <label for="obIdentityLabel">Identity label</label>
        <input id="obIdentityLabel" type="text" placeholder="identity label" />

        <div class="row" style="margin-top: 0.75rem;">
          <button id="btnObIdentityContinue" type="button">Continue</button>
        </div>

        <div id="existingInfo" class="small muted hidden" style="margin-top: 0.75rem;">
          Waiting for approval from another device…
        </div>
      </div>
    </div>
  </section>
</main>

<script type="module" src="./app.js"></script>
</body>
</html>
